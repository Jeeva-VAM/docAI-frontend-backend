# FileUploader Batch ID Fix

## Issue Found
From the console logs, we discovered that when uploading files to a user-created folder using the FileUploader component, the batch_id was showing as `'none'` instead of a proper UUID:

```
ðŸ“¤ Uploading file to folder: {
  batchId: 'none',  // âŒ Should be a UUID
}
```

## Root Cause
The `FileUploader.tsx` component had a **direct call** to `FileApiService.uploadFileToFolder(folderId, file)` **without generating or passing a batch_id**:

```tsx
// âŒ BEFORE - Missing batch_id parameter
const response = await FileApiService.uploadFileToFolder(folderId, file);
```

This bypassed our batch_id generation logic that was implemented in the `useApiFileUpload` hook.

## Solution Applied
Updated `FileUploader.tsx` to **always generate batch_id** for folder uploads:

```tsx
// âœ… AFTER - Generate and pass batch_id
// Generate batch_id for this upload action
const batchId = crypto.randomUUID();
console.log('ðŸ“¦ Generated batch_id for folder upload:', batchId);

// Upload each file to the folder via API
const uploadPromises = Array.from(fileList).map(async (file) => {
  try {
    console.log('ðŸ“¤ Starting upload for file:', file.name, 'to folder:', folderId, 'with batch_id:', batchId);
    const response = await FileApiService.uploadFileToFolder(folderId, file, batchId);
    // ...
  }
});
```

## Impact
- **Files uploaded to user-created folders** now get proper batch_id
- **Maintains consistency** with other upload scenarios
- **No behavior changes** - just fixes the missing batch_id

## Status: âœ… FIXED

### Upload Scenarios Now Fully Working:

| Scenario | batch_id | Status |
|----------|----------|---------|
| Regular file uploads (via App.tsx) | âœ” Generated by useApiFileUpload | âœ… Was already working |
| Upload to user-created folder | âœ” Generated by FileUploader | âœ… **FIXED** |
| Multi-file drops | âœ” Generated by useApiFileUpload | âœ… Was already working |
| Chunked uploads | âœ” Generated by chunkedUploadService | âœ… Was already working |
| Drag folder uploads | âœ” Generated by useApiFileUpload | âœ… Was already working |

All upload scenarios now generate proper batch_id values instead of null or 'none'.
